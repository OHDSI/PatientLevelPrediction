<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Developing Patient Level Prediction Models Using the Observational Medical Outcomes Partnership Common Data Model â€¢ PatientLevelPrediction</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Developing Patient Level Prediction Models Using the Observational Medical Outcomes Partnership Common Data Model">
<meta name="description" content="A user friendly way to create patient level prediction models using the OMOP (ObservationalMedical Outcomes Partnership) common data model. Given a cohort of interest and an outcome of interest, the package can use data in the OMOP Common Data Model to build a large set of features. These features can then be used to fit a predictive model with a number of machine learning algorithms. This is further described in J. Reps et al &lt;doi:10.1093/jamia/ocy032&gt;.">
<meta property="og:description" content="A user friendly way to create patient level prediction models using the OMOP (ObservationalMedical Outcomes Partnership) common data model. Given a cohort of interest and an outcome of interest, the package can use data in the OMOP Common Data Model to build a large set of features. These features can then be used to fit a predictive model with a number of machine learning algorithms. This is further described in J. Reps et al &lt;doi:10.1093/jamia/ocy032&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">PatientLevelPrediction</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">6.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="articles/InstallationGuide.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/AddingCustomFeatureEngineering.html">Adding Custom Feature Engineering Functions</a></li>
    <li><a class="dropdown-item" href="articles/AddingCustomModels.html">Adding Custom Patient-Level Prediction Algorithms</a></li>
    <li><a class="dropdown-item" href="articles/AddingCustomSamples.html">Adding Custom Sampling Functions</a></li>
    <li><a class="dropdown-item" href="articles/AddingCustomSplitting.html">Adding Custom Data Splitting</a></li>
    <li><a class="dropdown-item" href="articles/BenchmarkTasks.html">Benchmark Tasks</a></li>
    <li><a class="dropdown-item" href="articles/BestPractices.html">Best Practice Research</a></li>
    <li><a class="dropdown-item" href="articles/BuildingMultiplePredictiveModels.html">Automatically Build Multiple Patient-Level Predictive Models</a></li>
    <li><a class="dropdown-item" href="articles/BuildingPredictiveModels.html">Building patient-level predictive models</a></li>
    <li><a class="dropdown-item" href="articles/ClinicalModels.html">Clinical Models</a></li>
    <li><a class="dropdown-item" href="articles/ConstrainedPredictors.html">Constrained Predictors</a></li>
    <li><a class="dropdown-item" href="articles/CreatingLearningCurves.html">Creating Learning Curves</a></li>
    <li><a class="dropdown-item" href="articles/CreatingNetworkStudies.html">Making patient-level predictive network study packages</a></li>
    <li><a class="dropdown-item" href="articles/GISExample.html">Integration of GIS Data Into OHDSI Model Building</a></li>
    <li><a class="dropdown-item" href="articles/InstallationGuide.html">Patient-Level Prediction Installation Guide</a></li>
    <li><a class="dropdown-item" href="articles/Videos.html">Demo Videos</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="articles/BenchmarkTasks.html">Benchmarks</a></li>
<li class="nav-item"><a class="nav-link" href="articles/ConstrainedPredictors.html">Predictors</a></li>
<li class="nav-item"><a class="nav-link" href="articles/BestPractices.html">Best Practices</a></li>
<li class="nav-item"><a class="nav-link" href="articles/ClinicalModels.html">Clinical Models</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/PatientLevelPrediction"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="patientlevelprediction">PatientLevelPrediction<a class="anchor" aria-label="anchor" href="#patientlevelprediction"></a>
</h1></div>
<p><a href="https://github.com/OHDSI/PatientLevelPrediction/actions?query=workflow%3AR-CMD-check" class="external-link"><img src="https://github.com/OHDSI/PatientLevelPrediction/workflows/R-CMD-check/badge.svg" alt="Build Status"></a></p>
<p><a href="https://app.codecov.io/github/OHDSI/PatientLevelPrediction?branch=main" class="external-link"><img src="https://codecov.io/github/OHDSI/PatientLevelPrediction/coverage.svg?branch=main" alt="codecov.io"></a></p>
<p>PatientLevelPrediction is part of <a href="https://ohdsi.github.io/Hades/" class="external-link">HADES</a>.</p>
</div>
<div class="section level1">
<h1 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h1>
<p>PatientLevelPrediction is an R package for building and validating patient-level predictive models using data in the OMOP Common Data Model format.</p>
<p>Reps JM, Schuemie MJ, Suchard MA, Ryan PB, Rijnbeek PR. <a href="https://academic.oup.com/jamia/article/25/8/969/4989437" class="external-link">Design and implementation of a standardized framework to generate and evaluate patient-level prediction models using observational healthcare data.</a> J Am Med Inform Assoc. 2018;25(8):969-975.</p>
<p>The figure below illustrates the prediction problem we address. Among a population at risk, we aim to predict which patients at a defined moment in time (t = 0) will experience some outcome during a time-at-risk. Prediction is done using only information about the patients in an observation window prior to that moment in time.</p>
<p><img src="articles/images/Figure1.avif"></p>
<p>To define a prediction problem we have to define t=0 by a Target Cohort (T), the outcome we like to predict by an outcome cohort (O), and the time-at-risk (TAR). Furthermore, we have to make design choices for the model we like to develop, and determine the observational datasets to perform internal and external validation. This conceptual framework works for all type of prediction problems, for example those presented below (T=green, O=red).</p>
<p><img src="articles/images/problems.avif"></p>
</div>
<div class="section level1">
<h1 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h1>
<ul>
<li>Takes one or more target cohorts (Ts) and one or more outcome cohorts (Os) and develops and validates models for all T and O combinations.</li>
<li>Allows for multiple prediction design options.</li>
<li>Extracts the necessary data from a database in OMOP Common Data Model format for multiple covariate settings.</li>
<li>Uses a large set of covariates including for example all drugs, diagnoses, procedures, as well as age, comorbidity indexes, and custom covariates.</li>
<li>Allows you to add custom covariates or cohort covariates.</li>
<li>Includes a large number of state-of-the-art machine learning algorithms that can be used to develop predictive models, including Regularized logistic regression, Random forest, Gradient boosting machines, Decision tree, Naive Bayes, K-nearest neighbours, Neural network, AdaBoost and Support vector machines.</li>
<li>Allows you to add custom algorithms.</li>
<li>Allows you to add custom feature engineering</li>
<li>Allows you to add custom under/over sampling (or any other sampling) [note: based on existing research this is not recommended]</li>
<li>Contains functionality to externally validate models.</li>
<li>Includes functions to plot and explore model performance (ROC + Calibration).</li>
<li>Build ensemble models using EnsemblePatientLevelPrediction.</li>
<li>Build Deep Learning models using DeepPatientLevelPrediction.</li>
<li>Generates learning curves.</li>
<li>Includes a shiny app to interactively view and explore results.</li>
<li>In the shiny app you can create a html file document (report or protocol) containing all the study results.</li>
</ul>
</div>
<div class="section level1">
<h1 id="screenshots">Screenshots<a class="anchor" aria-label="anchor" href="#screenshots"></a>
</h1>
<table class="table">
<tr valign="bottom">
<td width="50%">
<p><img src="articles/images/sparseCalibration.avif" alt="Calibration plot" title="Calibration plot"></p>
</td>
<td width="50%">
<p><img src="articles/images/sparseROC.avif" alt="ROC plot" title="ROC plot"></p>
</td>
</tr>
<tr>
<td>
Calibration Plot
</td>
<td>
ROC Plot
</td>
</tr>
</table>
<p>Demo of the Shiny Apps can be found here:</p>
<ul>
<li><a href="https://data.ohdsi.org/smokingPhenotypeExplorer/" class="external-link">Multiple Prediction Viewer Shiny App</a></li>
</ul>
</div>
<div class="section level1">
<h1 id="technology">Technology<a class="anchor" aria-label="anchor" href="#technology"></a>
</h1>
<p>PatientLevelPrediction is an R package, with some functions using python through reticulate.</p>
</div>
<div class="section level1">
<h1 id="system-requirements">System Requirements<a class="anchor" aria-label="anchor" href="#system-requirements"></a>
</h1>
<p>Requires R (version 4.0 or higher). Installation on Windows requires <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">RTools</a>. Libraries used in PatientLevelPrediction require Java and Python.</p>
<p>The python installation is required for some of the machine learning algorithms. We advise to install Python 3.9 or higher using Anaconda (<a href="https://www.continuum.io/downloads" class="external-link uri">https://www.continuum.io/downloads</a>).</p>
</div>
<div class="section level1">
<h1 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h1>
<ul>
<li><p>To install the package please read the <a href="https://ohdsi.github.io/PatientLevelPrediction/articles/InstallationGuide.html" class="external-link">Package Installation guide</a></p></li>
<li><p>Have a look at the video below for an extensive demo of the package.</p></li>
</ul>
<p><a href="https://www.youtube.com/watch?feature=player_embedded&amp;v=BEukCbT8UoA%0A" target="_blank" class="external-link"><img src="https://img.youtube.com/vi/BEukCbT8UoA/0.jpg" alt="Video Vignette PLP Package" width="240" height="180" border="10"></a></p>
<p>Please read the main vignette for the package:</p>
<ul>
<li><a href="https://ohdsi.github.io/PatientLevelPrediction/articles/BuildingPredictiveModels.html" class="external-link">Building Single Patient-Level Predictive Models</a></li>
</ul>
<p>In addition we have created vignettes that describe advanced functionality in more detail:</p>
<ul>
<li><a href="https://ohdsi.github.io/PatientLevelPrediction/articles/BuildingMultiplePredictiveModels.html" class="external-link">Building Multiple Patient-Level Predictive Models</a></li>
<li><a href="https://ohdsi.github.io/PatientLevelPrediction/articles/AddingCustomModels.html" class="external-link">Adding Custom Machine Learning Algorithms</a></li>
<li><a href="https://github.com/OHDSI/DeepPatientLevelPrediction" class="external-link">Building Deep Learning Models</a></li>
<li><a href="https://github.com/OHDSI/EnsemblePatientLevelPrediction" class="external-link">Building Ensemble Models</a></li>
<li><a href="https://ohdsi.github.io/PatientLevelPrediction/articles/CreatingLearningCurves.html" class="external-link">Creating Learning Curves</a></li>
</ul>
<p>Package function reference: <a href="https://ohdsi.github.io/PatientLevelPrediction/reference/index.html" class="external-link">Reference</a></p>
</div>
<div class="section level1">
<h1 id="user-documentation">User Documentation<a class="anchor" aria-label="anchor" href="#user-documentation"></a>
</h1>
<p>Documentation can be found on the <a href="https://ohdsi.github.io/PatientLevelPrediction/" class="external-link">package website</a>.</p>
</div>
<div class="section level1">
<h1 id="support">Support<a class="anchor" aria-label="anchor" href="#support"></a>
</h1>
<ul>
<li>Developer questions/comments/feedback: <a href="https://forums.ohdsi.org/c/developers/7" class="external-link">OHDSI Forum</a>
</li>
<li>We use the <a href="https://github.com/OHDSI/PatientLevelPrediction/issues" class="external-link">GitHub issue tracker</a> for all bugs/issues/enhancements</li>
</ul>
</div>
<div class="section level1">
<h1 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h1>
<p>Read <a href="https://ohdsi.github.io/Hades/contribute.html" class="external-link">here</a> how you can contribute to this package.</p>
</div>
<div class="section level1">
<h1 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h1>
<p>PatientLevelPrediction is licensed under Apache License 2.0</p>
</div>
<div class="section level1">
<h1 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h1>
<p>PatientLevelPrediction is being developed in R Studio.</p>
</div>
<div class="section level1">
<h1 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h1>
<ul>
<li>The package is maintained by Egill Fridgeirsson and Jenna Reps and has been developed with major contributions from Peter Rijnbeek, Martijn Schuemie, Patrick Ryan, and Marc Suchard.</li>
<li>We like to thank the following persons for their contributions to the package: Seng Chan You, Ross Williams, Henrik John, Xiaoyong Pan, James Wiggins, Alexandros Rekkas</li>
<li>This project is supported in part through the National Science Foundation grant IIS 1251151.</li>
</ul>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/OHDSI/PatientLevelPrediction/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/OHDSI/PatientLevelPrediction/issues" class="external-link">Report a bug</a></li>
<li><a href="http://forums.ohdsi.org" class="external-link">Ask a question</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Apache License 2.0</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing PatientLevelPrediction</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Egill Fridgeirsson <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jenna Reps <br><small class="roles"> Author </small>  </li>
<li>Martijn Schuemie <br><small class="roles"> Author </small>  </li>
<li>Marc Suchard <br><small class="roles"> Author </small>  </li>
<li>Patrick Ryan <br><small class="roles"> Author </small>  </li>
<li>Peter Rijnbeek <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Egill Fridgeirsson, Jenna Reps, Martijn Schuemie, Marc Suchard, Patrick Ryan, Peter Rijnbeek.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
