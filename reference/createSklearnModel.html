<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plug an existing scikit learn python model into the PLP framework — createSklearnModel • PatientLevelPrediction</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plug an existing scikit learn python model into the PLP framework — createSklearnModel"><meta name="description" content="Plug an existing scikit learn python model into the
PLP framework"><meta property="og:description" content="Plug an existing scikit learn python model into the
PLP framework"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PatientLevelPrediction</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">6.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/InstallationGuide.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/AddingCustomFeatureEngineering.html">Adding Custom Feature Engineering Functions</a></li>
    <li><a class="dropdown-item" href="../articles/AddingCustomModels.html">Adding Custom Patient-Level Prediction Algorithms</a></li>
    <li><a class="dropdown-item" href="../articles/AddingCustomSamples.html">Adding Custom Sampling Functions</a></li>
    <li><a class="dropdown-item" href="../articles/AddingCustomSplitting.html">Adding Custom Data Splitting</a></li>
    <li><a class="dropdown-item" href="../articles/BenchmarkTasks.html">Benchmark Tasks</a></li>
    <li><a class="dropdown-item" href="../articles/BestPractices.html">Best Practice Research</a></li>
    <li><a class="dropdown-item" href="../articles/BuildingMultiplePredictiveModels.html">Automatically Build Multiple Patient-Level Predictive Models</a></li>
    <li><a class="dropdown-item" href="../articles/BuildingPredictiveModels.html">Building patient-level predictive models</a></li>
    <li><a class="dropdown-item" href="../articles/ClinicalModels.html">Clinical Models</a></li>
    <li><a class="dropdown-item" href="../articles/ConstrainedPredictors.html">Constrained Predictors</a></li>
    <li><a class="dropdown-item" href="../articles/CreatingLearningCurves.html">Creating Learning Curves</a></li>
    <li><a class="dropdown-item" href="../articles/CreatingNetworkStudies.html">Making patient-level predictive network study packages</a></li>
    <li><a class="dropdown-item" href="../articles/GISExample.html">Integration of GIS Data Into OHDSI Model Building</a></li>
    <li><a class="dropdown-item" href="../articles/InstallationGuide.html">Patient-Level Prediction Installation Guide</a></li>
    <li><a class="dropdown-item" href="../articles/Videos.html">Demo Videos</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/BenchmarkTasks.html">Benchmarks</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ConstrainedPredictors.html">Predictors</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/BestPractices.html">Best Practices</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ClinicalModels.html">Clinical Models</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/PatientLevelPrediction"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plug an existing scikit learn python model into the PLP framework</h1>
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/PatientLevelPrediction/blob/develop/R/ExistingSklearn.R" class="external-link"><code>R/ExistingSklearn.R</code></a></small>
      <div class="d-none name"><code>createSklearnModel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plug an existing scikit learn python model into the
PLP framework</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">createSklearnModel</span><span class="op">(</span></span>
<span>  modelLocation <span class="op">=</span> <span class="st">"/model"</span>,</span>
<span>  covariateMap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>columnId <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, covariateId <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="op">)</span>,</span>
<span>  isPickle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  targetId <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outcomeId <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  populationSettings <span class="op">=</span> <span class="fu"><a href="createStudyPopulationSettings.html">createStudyPopulationSettings</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  restrictPlpDataSettings <span class="op">=</span> <span class="fu"><a href="createRestrictPlpDataSettings.html">createRestrictPlpDataSettings</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  covariateSettings <span class="op">=</span> <span class="fu">FeatureExtraction</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/FeatureExtraction/man/createDefaultCovariateSettings.html" class="external-link">createDefaultCovariateSettings</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  featureEngineering <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tidyCovariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  requireDenseMatrix <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-modellocation">modelLocation<a class="anchor" aria-label="anchor" href="#arg-modellocation"></a></dt>
<dd><p>The location of the folder that contains the model as
model.pkl</p></dd>


<dt id="arg-covariatemap">covariateMap<a class="anchor" aria-label="anchor" href="#arg-covariatemap"></a></dt>
<dd><p>A data.frame with the columns: columnId and covariateId.
<code>covariateId</code> from FeatureExtraction is the standard OHDSI covariateId.
<code>columnId</code> is the column location the model expects that covariate to be in.
For example, if you had a column called 'age' in your model and this was the
3rd column when fitting the model, then the values for columnId would be 3,
covariateId would be 1002 (the covariateId for age in years) and</p></dd>


<dt id="arg-ispickle">isPickle<a class="anchor" aria-label="anchor" href="#arg-ispickle"></a></dt>
<dd><p>If the model should be saved as a pickle set this to TRUE if
it should be saved as json set this to FALSE.</p></dd>


<dt id="arg-targetid">targetId<a class="anchor" aria-label="anchor" href="#arg-targetid"></a></dt>
<dd><p>Add the development targetId here</p></dd>


<dt id="arg-outcomeid">outcomeId<a class="anchor" aria-label="anchor" href="#arg-outcomeid"></a></dt>
<dd><p>Add the development outcomeId here</p></dd>


<dt id="arg-populationsettings">populationSettings<a class="anchor" aria-label="anchor" href="#arg-populationsettings"></a></dt>
<dd><p>Add development population settings (this includes the time-at-risk settings).</p></dd>


<dt id="arg-restrictplpdatasettings">restrictPlpDataSettings<a class="anchor" aria-label="anchor" href="#arg-restrictplpdatasettings"></a></dt>
<dd><p>Add development restriction settings</p></dd>


<dt id="arg-covariatesettings">covariateSettings<a class="anchor" aria-label="anchor" href="#arg-covariatesettings"></a></dt>
<dd><p>Add the covariate settings here to specify how the model covariates are created from the OMOP CDM</p></dd>


<dt id="arg-featureengineering">featureEngineering<a class="anchor" aria-label="anchor" href="#arg-featureengineering"></a></dt>
<dd><p>Add any feature engineering here (e.g., if you need to modify the covariates before applying the model)
This is a list of lists containing a string named funct specifying the engineering function to call and settings that are inputs to that
function. funct must take as input trainData (a plpData object) and settings (a list).</p></dd>


<dt id="arg-tidycovariates">tidyCovariates<a class="anchor" aria-label="anchor" href="#arg-tidycovariates"></a></dt>
<dd><p>Add any tidyCovariates mappings here (e.g., if you need to normalize the covariates)</p></dd>


<dt id="arg-requiredensematrix">requireDenseMatrix<a class="anchor" aria-label="anchor" href="#arg-requiredensematrix"></a></dt>
<dd><p>Specify whether the model needs a dense matrix (TRUE or FALSE)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class plpModel, this is a list that contains:
model (the location of the model.pkl),
preprocessing (settings for mapping the covariateIds to the model
column mames),
modelDesign (specification of the model design),
trainDetails (information about the model fitting) and
covariateImportance.</p>
<p>You can use the output as an input in PatientLevelPrediction::predictPlp to
apply the model and calculate the risk for patients.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function lets users add an existing scikit learn model that is saved as
model.pkl into PLP format.  covariateMap is a mapping between standard
covariateIds and the model columns. The user also needs to specify the
covariate settings and population settings as these are used to determine
the standard PLP model design.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Egill Fridgeirsson, Jenna Reps, Martijn Schuemie, Marc Suchard, Patrick Ryan, Peter Rijnbeek.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

